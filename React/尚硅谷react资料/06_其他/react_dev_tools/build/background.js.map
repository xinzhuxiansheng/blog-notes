{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/background.js"],"names":["ports","IS_FIREFOX","navigator","userAgent","indexOf","chrome","runtime","onConnect","addListener","port","tab","name","isNumeric","installContentScript","sender","id","devtools","doublePipe","str","tabId","tabs","executeScript","file","one","two","onMessage","lOne","message","postMessage","lTwo","shutdown","removeListener","disconnect","onDisconnect","setIconAndPopup","reactBuildType","browserAction","setIcon","path","setPopup","popup","isRestrictedBrowserPage","url","URL","protocol","checkAndHandleRestrictedPageIfSo","query","forEach","onCreated","changeInfo","onUpdated","active","status","request","hasDetectedReact"],"mappings":"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","file":"background.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 93);\n","/* global chrome */\n\n'use strict';\n\nconst ports = {};\n\nconst IS_FIREFOX = navigator.userAgent.indexOf('Firefox') >= 0;\n\nchrome.runtime.onConnect.addListener(function(port) {\n  let tab = null;\n  let name = null;\n  if (isNumeric(port.name)) {\n    tab = port.name;\n    name = 'devtools';\n    installContentScript(+port.name);\n  } else {\n    tab = port.sender.tab.id;\n    name = 'content-script';\n  }\n\n  if (!ports[tab]) {\n    ports[tab] = {\n      devtools: null,\n      'content-script': null,\n    };\n  }\n  ports[tab][name] = port;\n\n  if (ports[tab].devtools && ports[tab]['content-script']) {\n    doublePipe(ports[tab].devtools, ports[tab]['content-script']);\n  }\n});\n\nfunction isNumeric(str: string): boolean {\n  return +str + '' === str;\n}\n\nfunction installContentScript(tabId: number) {\n  chrome.tabs.executeScript(\n    tabId,\n    {file: '/build/contentScript.js'},\n    function() {},\n  );\n}\n\nfunction doublePipe(one, two) {\n  one.onMessage.addListener(lOne);\n  function lOne(message) {\n    two.postMessage(message);\n  }\n  two.onMessage.addListener(lTwo);\n  function lTwo(message) {\n    one.postMessage(message);\n  }\n  function shutdown() {\n    one.onMessage.removeListener(lOne);\n    two.onMessage.removeListener(lTwo);\n    one.disconnect();\n    two.disconnect();\n  }\n  one.onDisconnect.addListener(shutdown);\n  two.onDisconnect.addListener(shutdown);\n}\n\nfunction setIconAndPopup(reactBuildType, tabId) {\n  chrome.browserAction.setIcon({\n    tabId: tabId,\n    path: {\n      '16': 'icons/16-' + reactBuildType + '.png',\n      '32': 'icons/32-' + reactBuildType + '.png',\n      '48': 'icons/48-' + reactBuildType + '.png',\n      '128': 'icons/128-' + reactBuildType + '.png',\n    },\n  });\n  chrome.browserAction.setPopup({\n    tabId: tabId,\n    popup: 'popups/' + reactBuildType + '.html',\n  });\n}\n\nfunction isRestrictedBrowserPage(url) {\n  return !url || new URL(url).protocol === 'chrome:';\n}\n\nfunction checkAndHandleRestrictedPageIfSo(tab) {\n  if (tab && isRestrictedBrowserPage(tab.url)) {\n    setIconAndPopup('restricted', tab.id);\n  }\n}\n\n// update popup page of any existing open tabs, if they are restricted browser pages.\n// we can't update for any other types (prod,dev,outdated etc)\n// as the content script needs to be injected at document_start itself for those kinds of detection\n// TODO: Show a different popup page(to reload current page probably) for old tabs, opened before the extension is installed\nif (!IS_FIREFOX) {\n  chrome.tabs.query({}, tabs => tabs.forEach(checkAndHandleRestrictedPageIfSo));\n  chrome.tabs.onCreated.addListener((tabId, changeInfo, tab) =>\n    checkAndHandleRestrictedPageIfSo(tab),\n  );\n}\n\n// Listen to URL changes on the active tab and update the DevTools icon.\nchrome.tabs.onUpdated.addListener((tabId, changeInfo, tab) => {\n  if (IS_FIREFOX) {\n    // We don't properly detect protected URLs in Firefox at the moment.\n    // However we can reset the DevTools icon to its loading state when the URL changes.\n    // It will be updated to the correct icon by the onMessage callback below.\n    if (tab.active && changeInfo.status === 'loading') {\n      setIconAndPopup('disabled', tabId);\n    }\n  } else {\n    // Don't reset the icon to the loading state for Chrome or Edge.\n    // The onUpdated callback fires more frequently for these browsers,\n    // often after onMessage has been called.\n    checkAndHandleRestrictedPageIfSo(tab);\n  }\n});\n\nchrome.runtime.onMessage.addListener((request, sender) => {\n  if (sender.tab) {\n    // This is sent from the hook content script.\n    // It tells us a renderer has attached.\n    if (request.hasDetectedReact) {\n      // We use browserAction instead of pageAction because this lets us\n      // display a custom default popup when React is *not* detected.\n      // It is specified in the manifest.\n      setIconAndPopup(request.reactBuildType, sender.tab.id);\n    }\n  }\n});\n"],"sourceRoot":""}