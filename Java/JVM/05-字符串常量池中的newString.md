## 避免new String()的内存占用

### 引言
在Java开发中，字符串的创建是较频繁的，从而导致字符串在jvm内存空间的申请和操作也都较频繁，极大程度的影响性能，为了提高性能和减少内存开销，所以作为最基础常用的“引用数据类型”，JVM设计者在JVM层面提供了“字符串常量池”，类似于缓冲区，在创建字符串常量时，首先查询字符串常量池是否存在该字符串，若存在该字符串，返回引用实例，不存在的话，则实例化该字符串并放入池中。

那么`字符串常量池`的主要目的是提高性能和减少内存占用。由于字符串是 Java 中使用非常频繁的对象，所以为了避免重复创建相同的字符串对象，Java 使用字符串常量池来存储编译时已知的字符串字面量。当在代码中使用相同的字符串字面量时，它们会在常量池中共享同一个实例，从而减少内存占用。`这种设计也造就了Java中String类型是不可变的。`

>在字符串操作中分为三类，而本文只介绍new String()方式以及需特别注意的地方。

### new String()    
**示例**
```java
String s = new String("yzhou")
```
当使用 `new String("yzhou")` 时，实际上有两个字符串对象被创建。首先，由于字符串字面量 `yzhou`，编译器会在编译时将其放入常量池。其次，`new String("yzhou")` 表示创建一个新的 `String` 对象，这将在`堆上分配内存`。这个新的 `String` 对象会持有一个指向常量池中字符串字面量的引用。     

从而，使用 new String() 会在运行时在堆上创建一个新的 String 对象，并将常量池中的字符串字面量复制到这个新对象。这意味着在堆上会有一个新的 String 对象，其内容与常量池中的字符串相同，但它们是两个独立的对象。这个新创建的 String 对象的引用会被返回。

所以在使用 new String() 可能会导致额外的内存消耗，因为它在堆上创建了一个新的对象。如果不需要创建新的 String 对象，而只是想引用常量池中的字符串，可以直接使用字符串字面量，例如：  
```java
String s = "yzhou";
```
**这样做可以避免在堆上创建不必要的 String 对象，从而减少内存占用。**

