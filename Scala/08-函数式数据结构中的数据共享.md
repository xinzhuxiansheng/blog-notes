
## 函数式数据结构中的数据共享

当数据不可变时，我们该怎么写一些例如从list中删除元素之类的函数? 答案很简单，当我们对一个已存在的列表xs在前面添加一一个元素1的时候，返回- -个新的列表，即Cons(1, xs)。 既然列表是不可变的,我们不需要真的去复制一份xs,可以直接复用它，这也称为`数据共享`。共享不可变数据可以让函数实现更高的效率。我们可以返回不可变数据结构而不用担心后续代码修改它，不需要悲观地复制一份数据以避免对其修改或污染。  

以同样的方式，删除-一个列表的第一个元素，比如myList = Cons(x, xs)， 只需要返回尾部的xs。并没有真的删除元素，原始列表myList依然可用，丝毫未受影响。我们说函数式数据结构是持久的，意味着已存在的引用不会因数据结构的操作而改变。  

让我们试着实现一个有点不一样的函数，以另一种方式来修改列表。可以把这个函数和其他我们写过的函数都放在List伴生对象里。    

>悲观的复制方式在大型程序里会造成问题。如将可变数据传递给一连串的松散耦合的组件，每个组件都会复制-份自己的数据,因为其他组件可能会修改它。不可变数据在共享时总是安全的，所以我们不必复制数据。我们发现在大型程序里，在实现相同的效果时函数式编程往往比依赖副作用能取得更好的性能，因为丽数式能更好地利用数据共享和数据运算。 

**exercise**    

